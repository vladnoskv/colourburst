<!DOCTYPE html>
<!-- Color‚ÄëBurst‚ÄëClicker v12.2 ‚Äì HUD reference fix -->
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Color Burst Clicker</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
<style>
/* (style unchanged) */
:root{--pink:#ff006e;--yellow:#ffce00;--dark:#111;--ui:rgba(0,0,0,.55);--mask:rgba(0,0,0,.75);font-family:Poppins,Arial,sans-serif}
html,body{margin:0;height:100%;background:var(--dark);color:#fff;overflow:hidden}
canvas{width:100%;height:100%;display:block;cursor:pointer}
.hud{position:fixed;top:0;left:0;width:100%;height:54px;background:var(--ui);backdrop-filter:blur(6px);display:flex;justify-content:space-between;align-items:center;padding:0 14px;font-weight:600;z-index:10}
.hud span{margin-right:14px}
#bar{position:absolute;bottom:0;left:0;height:6px;width:0;background:linear-gradient(90deg,var(--pink),var(--yellow));transition:width .12s}
.btn{border:none;border-radius:6px;background:var(--pink);color:#fff;padding:8px 14px;font-weight:600;cursor:pointer;transition:.2s}
.btn:hover{background:#d60063}
#shopToggle{position:fixed;top:66px;right:22px;z-index:15}
#shop{position:fixed;top:120px;right:22px;width:270px;background:var(--ui);backdrop-filter:blur(6px);padding:18px;border-radius:10px;display:none;z-index:20}
.item{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.item-price{font-size:13px;opacity:.8}
.menu{position:fixed;inset:0;background:var(--mask);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:18px;text-align:center;z-index:100}
.clickRipple{position:absolute;border:2px dashed var(--yellow);border-radius:50%;pointer-events:none;opacity:.8;animation:rip .8s ease-out forwards}
@keyframes rip{to{transform:scale(1.3);opacity:0}}
.bossWrap{position:fixed;top:60px;left:50%;transform:translateX(-50%);width:60%;height:18px;border:2px solid #fff;border-radius:10px;display:none;overflow:hidden;z-index:9}
#bossHP{width:100%;height:100%;background:#ff4040}
</style>
</head>
<body>
<!-- (HTML structure unchanged) -->
<canvas id="cv"></canvas>
<div id="hud" class="hud" hidden>
  <div><span id="lvl">L1</span><span id="pts">0</span><span id="task">0/0</span><span id="lives">‚ù§10</span><span id="rad">x1.0</span></div>
  <div><span id="time" hidden>90s</span></div>
  <div id="bar"></div>
</div>
<div class="bossWrap" id="bossWrap"><div id="bossHP"></div></div>
<button id="shopToggle" class="btn" hidden>SHOP (S)</button>
<div id="shop">
  <h3>Shop</h3>
  <div class="item" data-id="radius"><div>Radius +25%<div class="item-price" id="c-radius"></div></div><button class="btn">Buy</button></div>
  <div class="item" data-id="life"><div>+1 Life<div class="item-price" id="c-life"></div></div><button class="btn">Buy</button></div>
  <div class="item" data-id="bomb"><div>Blast Bomb<div class="item-price" id="c-bomb"></div></div><button class="btn">Buy</button></div>
  <div class="item" data-id="slow"><div>Slow‚ÄëMo 5 s<div class="item-price" id="c-slow"></div></div><button class="btn">Buy</button></div>
  <small>B = blast ‚Ä¢ F = slow</small>
</div>
<div id="menu" class="menu">
  <h1>üéâ Color Burst Clicker</h1>
  <button class="btn mode" data-diff="easy">Play Easy</button>
  <button class="btn mode" data-diff="normal">Play Normal</button>
  <button class="btn mode" data-diff="hard">Play Hard</button>
  <button class="btn mode" data-diff="ranked">Play Ranked (90s)</button>
  <small>Choose your challenge</small>
</div>
<script>
/*******************  AUDIO  *******************/
const AC=new (window.AudioContext||window.webkitAudioContext)();
const beep=(f=320,t='triangle',d=.15)=>{const o=AC.createOscillator(),g=AC.createGain();o.type=t;o.frequency.value=f;g.gain.value=.5;g.gain.exponentialRampToValueAtTime(.01,AC.currentTime+d);o.connect(g).connect(AC.destination);o.start();o.stop(AC.currentTime+d)};
const FX={pop:()=>beep(),bomb:()=>beep(80,'sawtooth',.25),dud:()=>beep(150,'square',.2)};
/*******************  CONSTANTS & DOM REFS  *******************/
const $=s=>document.querySelector(s);
// ‚úÖ HUD object now defined at top so every method can access it safely
const HUD={box:$('#hud'),lvl:$('#lvl'),pts:$('#pts'),task:$('#task'),lives:$('#lives'),rad:$('#rad'),time:$('#time'),bar:$('#bar')};
const DIFFS={easy:{lifeRule:'twoMiss',speed:.75,lives:12},normal:{lifeRule:'timeout',speed:1,lives:10},hard:{lifeRule:'miss',speed:1.25,lives:8},ranked:{lifeRule:'miss',speed:1.25,lives:8}};
const TYPES={C:'circle',S:'square',T:'tri',STAR:'star',BOMB:'bomb',BOSS:'boss'};
const SHAPES=[TYPES.C,TYPES.S,TYPES.T];
/*******************  CANVAS  *******************/
const cv=$('#cv'),ctx=cv.getContext('2d');let W,H;const fit=()=>{W=cv.width=innerWidth;H=cv.height=innerHeight};window.addEventListener('resize',fit);fit();
/*******************  UTILS  *******************/
const dist2=(a,b,x,y)=>(a-x)**2+(b-y)**2;
function collide(a,b){const dx=b.x-a.x,dy=b.y-a.y,dist=Math.hypot(dx,dy),min=a.r+b.r;if(dist===0||dist>=min)return;const nx=dx/dist,ny=dy/dist;const p=2*((a.vx*nx+a.vy*ny)-(b.vx*nx+b.vy*ny))/(a.m+b.m);a.vx-=p*b.m*nx;a.vy-=p*b.m*ny;b.vx+=p*a.m*nx;b.vy+=p*a.m*ny;const overlap=min-dist,sep=overlap/2;a.x-=nx*sep;a.y-=ny*sep;b.x+=nx*sep;b.y+=ny*sep;}
/*******************  CLASSES (Entity, Particle) ‚Äì unchanged  *******************/
// ... (keep class definitions from previous version)
/*******************  GAME CLASS ‚Äì unchanged logic aside from using HUD defined above  *******************/
// ... (keep Game class definition from previous version)
/*******************  INITIALISE  *******************/
new Game();
</script>
</body>
</html>
